<!-- usuarios_editar.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Editar Usuario | GLBINGO</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/usuarios.css') }}">
  <style>
    @keyframes spin-slow { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }
    .animate-spin-slow { animation: spin-slow 8s linear infinite; }
    .input-usuario { width: 100%; padding: 0.5rem 0.75rem; border-radius: 0.5rem; border: 1px solid #e5e7eb; }
    .input-usuario:focus { outline: none; border-color: #60a5fa; box-shadow: 0 0 0 1px #60a5fa; }
  </style>
</head>
<body class="bg-gray-100 min-h-screen">

  <!-- ===== Sidebar (botones del dashboard) ===== -->
  <aside id="sidebar"
         class="fixed inset-y-0 left-0 z-40 hidden md:flex w-64 bg-[#1b2746] text-white shadow-xl flex-col">
    <div class="px-4 py-5 border-b border-white/10">
      <div class="flex items-center gap-3">
        <img src="{{ url_for('static', filename='img/logo.png') }}" class="h-12 w-12 rounded-xl bg-white p-1 shadow" alt="Logo GLBINGO">
        <div class="text-xl font-black">GL Bingo</div>
      </div>
    </div>
    <nav class="p-3 space-y-1 text-[15px] overflow-y-auto">
      <a href="/dashboard" class="flex items-center gap-3 px-4 py-2 rounded-xl transition hover:bg-white/10 text-white/90 hover:text-white">
        <span>ğŸ </span> <span class="truncate">Dashboard</span>
      </a>
      <a href="/usuarios" class="flex items-center gap-3 px-4 py-2 rounded-xl bg-white/20 text-white font-extrabold">
        <span>ğŸ§‘â€ğŸ’¼</span> <span class="truncate">Usuarios</span>
      </a>
      <a href="/juego" class="flex items-center gap-3 px-4 py-2 rounded-xl transition hover:bg-white/10 text-white/90 hover:text-white">
        <span>ğŸ²</span> <span class="truncate">Juego</span>
      </a>
      <a href="/contabilidad" class="flex items-center gap-3 px-4 py-2 rounded-xl transition hover:bg-white/10 text-white/90 hover:text-white">
        <span>ğŸ“Š</span> <span class="truncate">Contabilidad</span>
      </a>
      <a href="/vendedores" class="flex items-center gap-3 px-4 py-2 rounded-xl transition hover:bg-white/10 text-white/90 hover:text-white">
        <span>ğŸ§¾</span> <span class="truncate">Vendedores</span>
      </a>
      <a href="/asignar-planillas" class="flex items-center gap-3 px-4 py-2 rounded-xl transition hover:bg-white/10 text-white/90 hover:text-white">
        <span>ğŸ“‘</span> <span class="truncate">Asignar Planillas</span>
      </a>
      <a href="/impresion" class="flex items-center gap-3 px-4 py-2 rounded-xl transition hover:bg-white/10 text-white/90 hover:text-white">
        <span>ğŸ–¨ï¸</span> <span class="truncate">ImpresiÃ³n de Boletos</span>
      </a>
      <a href="/cobro" class="flex items-center gap-3 px-4 py-2 rounded-xl transition hover:bg-white/10 text-white/90 hover:text-white">
        <span>ğŸ’µ</span> <span class="truncate">Cobro de Caja</span>
      </a>
      <a href="/pago-premios" class="flex items-center gap-3 px-4 py-2 rounded-xl transition hover:bg-white/10 text-white/90 hover:text-white">
        <span>ğŸ…</span> <span class="truncate">Pago de Premios</span>
      </a>
      <a href="/sorteo" class="flex items-center gap-3 px-4 py-2 rounded-xl transition hover:bg-white/10 text-white/90 hover:text-white">
        <span>ğŸŸï¸</span> <span class="truncate">Sorteo</span>
      </a>
      <a href="/crear-figuras" class="flex items-center gap-3 px-4 py-2 rounded-xl transition hover:bg-white/10 text-white/90 hover:text-white">
        <span>ğŸŸ©</span> <span class="truncate">Crear Figuras</span>
      </a>
      <a href="/escoger-figuras" class="flex items-center gap-3 px-4 py-2 rounded-xl transition hover:bg-white/10 text-white/90 hover:text-white">
        <span>ğŸŸ¦</span> <span class="truncate">Escoger Figuras</span>
      </a>
      <a href="/boletin" class="flex items-center gap-3 px-4 py-2 rounded-xl transition hover:bg-white/10 text-white/90 hover:text-white">
        <span>ğŸ“‹</span> <span class="truncate">BoletÃ­n</span>
      </a>
    </nav>
    <div class="mt-auto p-3 border-t border-white/10">
      <a href="{{ url_for('logout') }}"
         class="block text-center bg-red-500 hover:bg-red-600 transition font-bold rounded-xl py-2">Cerrar sesiÃ³n</a>
    </div>
  </aside>
  <!-- ===== /Sidebar ===== -->

  <!-- Contenido desplazado cuando el sidebar estÃ¡ visible -->
  <div class="md:ml-64">
    <!-- HEADER (sin cambios, solo botÃ³n hamburguesa para mÃ³vil) -->
    <header class="flex items-center justify-between bg-white shadow px-6 py-4">
      <div class="flex items-center gap-3">
        <button id="openSidebar" class="md:hidden mr-2 rounded-lg border border-gray-200 px-3 py-2">
          <i class="bi bi-list text-xl"></i>
        </button>
        <img src="{{ url_for('static', filename='img/logo.png') }}" class="h-12 w-12 animate-spin-slow" alt="Logo GLBINGO">
        <span class="font-black text-2xl text-gray-800 tracking-widest">GLBINGO</span>
      </div>
      <a href="{{ url_for('usuarios') }}"
         class="bg-gradient-to-r from-pink-500 to-yellow-400 hover:from-yellow-400 hover:to-pink-500 text-white font-bold px-6 py-2 rounded-xl shadow transition">â† Volver</a>
    </header>

    <!-- MAIN (tu cÃ³digo intacto) -->
    <main class="max-w-lg mx-auto py-8">
      <div class="bg-white rounded-2xl shadow-xl p-8">
        <h2 class="text-2xl font-black text-blue-700 mb-4 flex items-center gap-2">
          <i class="bi bi-pencil"></i> Editar Usuario
        </h2>
        <form action="{{ url_for('editar_usuario', nombre=user.nombre) }}" method="post" autocomplete="off">
          <!-- Selector visual de avatar -->
          <div class="mb-3">
            <label class="block text-gray-700 font-bold mb-1">Avatar</label>
            <div class="flex gap-4 items-center">
              <label>
                <input type="radio" name="avatar_select" value="avatar-male.png"
                       {% if user.avatar == 'avatar-male.png' %}checked{% endif %}>
                <img src="{{ url_for('static', filename='avatars/avatar-male.png') }}" class="w-12 h-12 rounded-full border shadow cursor-pointer" alt="Masculino">
              </label>
              <label>
                <input type="radio" name="avatar_select" value="avatar-female.png"
                       {% if user.avatar == 'avatar-female.png' %}checked{% endif %}>
                <img src="{{ url_for('static', filename='avatars/avatar-female.png') }}" class="w-12 h-12 rounded-full border shadow cursor-pointer" alt="Femenino">
              </label>
            </div>
          </div>

          <div class="mb-3">
            <label class="block text-gray-700 font-bold">Usuario</label>
            <input type="text" name="username" class="input-usuario bg-gray-200" value="{{ user.nombre }}" readonly>
          </div>

          <div class="mb-3">
            <label class="block text-gray-700 font-bold">Correo</label>
            <input type="email" name="email" class="input-usuario" value="{{ user.email }}">
          </div>

          <div class="mb-3">
            <label class="block text-gray-700 font-bold">Rol</label>
            <select name="rol" class="input-usuario">
              {% for r in roles %}
              <option value="{{ r }}" {% if user.rol == r %}selected{% endif %}>{{ r }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="mb-3">
            <label class="block text-gray-700 font-bold">ContraseÃ±a</label>
            <div class="flex relative">
              <input type="password" name="password" id="password" class="input-usuario pr-10" value="{{ user.clave }}">
              <span class="absolute right-3 top-2 text-xl text-gray-400 cursor-pointer" onclick="togglePassword()">
                <i id="eye" class="bi bi-eye"></i>
              </span>
            </div>
          </div>

          <div class="flex gap-3 pt-2 justify-center">
            <button type="submit"
                    class="bg-gradient-to-r from-blue-600 to-pink-500 hover:from-pink-500 hover:to-blue-700 text-white font-bold px-5 py-2 rounded-lg shadow transition">
              <i class="bi bi-save"></i> Guardar Cambios
            </button>
            <a href="{{ url_for('usuarios') }}" class="bg-gray-300 hover:bg-gray-400 text-gray-700 px-5 py-2 rounded-lg shadow font-semibold transition">Cancelar</a>
          </div>
        </form>
      </div>
    </main>
  </div>

  <!-- JS: abrir/cerrar sidebar en mÃ³vil + ver contraseÃ±a -->
  <script>
    const sb = document.getElementById('sidebar');
    const openBtn = document.getElementById('openSidebar');
    openBtn?.addEventListener('click', () => {
      if (sb.classList.contains('hidden')) {
        sb.classList.remove('hidden');
        sb.classList.add('flex');
      } else {
        sb.classList.add('hidden');
        sb.classList.remove('flex');
      }
    });

    function togglePassword() {
      const passInput = document.getElementById('password');
      const eye = document.getElementById('eye');
      if (passInput.type === "password") {
        passInput.type = "text";
        eye.className = "bi bi-eye-slash";
      } else {
        passInput.type = "password";
        eye.className = "bi bi-eye";
      }
    }
  </script>
</body>
</html>
